UBUNTU
======

sudo apt-get install postgresql

ARCH LINUX
==========

/usr/bin/core_perl/cpan Finance::BeanCounter
/usr/bin/core_perl/cpan DBD::Pg # for postgres backend

ALL
===


sudo su - postgres
createuser mcarter -d -A
exit

setup_beancounter -s

ln -s $PWD/beancounterrc ~/.beancounterrc 


dropdb beancounter

psql beancounter -f beanat.sql
#beancounter update_beancounter

beancounter addindex ^FTSE # not sure this is useful
./addsyms
#beancounter backpopulate --prevdate '10 years ago'

beancounter addstock ^FTSE  ^FTAS ^FTMC # add Footsie to things we want to track
beancounter backpopulate --prevdate '10 years ago' ^FTSE

beancounter addportfolio 888.L:1385:P:tdi:mc:170.5827:20130416
beancounter backpopulate --prevdate '1 month ago' 888.L

beancounter addportfolio DXNS.L:42346:P:hl:mc:37.7834:20130624
beancounter backpopulate --prevdate '1 month ago' DXNS.L

psql -c command
beancounter fxbackpopulate  --prevdate 20130101 --date yesterday EUR
beancounter dayendreport
psql -d beancounter -c "INSERT INTO fxprices VALUES ( 'P', '2013-06-29', 0.01, 0.01, 0.01, 0.01, 0.01, 0.00)"
psql -d beancounter -c "INSERT INTO fxprices VALUES ( 'P', '2013-06-27', 0.01, 0.01, 0.01, 0.01, 0.01, 0.00)"
psql -d beancounter -c "INSERT INTO fxprices VALUES ( 'P', '2001-01-01', 0.01, 0.01, 0.01, 0.01, 0.01, 0.00)"

beancounter plreport --prevdate "2 days ago"
beancounter plreport --prevdate "3 months ago" --date "today"
psql -d beancounter -c "DELETE FROM portfolio WHERE symbol='888.L';"

beancounter backpopulate --prevdate "1 jun" --date "6 jun" 888.L DXNS.L
   Adding 888.L from 20130405 to 20130405
   Adding DXNS.L from 20130405 to 20130405

beancounter addportfolio DXNS.L:-30944:P:hl:mc:41.2460:20130704

beancounter status

beancounter backpopulate --prevdate "1 jun" --date "6 jun" \
            888.L AZN.L DXNS.L BLVN.L EZJ.L GAH.L GBO.L IDOX.L \
            KBC.L LAM.L NANO.L PIC.L PRZ.L RGS.L SGP.L SID.L \
            TAST.L TCG.L THT.L TW.L ULVR.L VLX.L

beancounter addstock AHT.L
beancounter backpopulate AHT.L --prevdate "300 days ago"

A good name for a script is fazeolo, which is Esperanto for bean

#aptitude install finance-yahooquote
#aptitude install   libfinance-yahooquote-perl


beancounter deactivate AML.L APH.L BVC.L CHAR.L CGL.L CRC CSAL CTR.L DOM.L FCCN.L FCSS.L FLYB.L GFM.L HIK.L ICP.L INDV.L IRV.L  HYH KAZ.L KBC.L KEYS LMI.L LRD.L PIC.L PLE.L PLUS.L POL.L PRES.L RBS.L REDD.L  S32.L SHOE.L SHOS SVI.L STVG.L THT.L UTW.L

beancounter fxbackpopulate --prevdate '5 years ago'  --date 'today' USD

# fix currency GBX to GBP:
psql beancounter -c "insert into fxprices values ('GBX', '2000-01-01', 0.01, 0.01, 0.01, 0.01, 0.01, 0.01)"

#to populate portfolio from data dir:
./mkbap

# Run a report:
beancounter dayendreport --prevdate '1 week ago' --date today

# Portfolio on a given date:
beancounter status --date 2016-04-05 --restriction "type = 'tdi' and date <= '2016-04-05'"

